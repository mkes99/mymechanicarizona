---
/**
 * AppointmentForm.astro
 * - Appointment popup (Form ID: 3)
 * - Working multi-file picker via “Choose File”
 * - Formidable-like file list UI (remove individual + remove all)
 * - Size guard (per file)
 * - Native date input (no placeholder)
 */
const FORM_ID = "form_appointmentform";
const MAX_UPLOAD_BYTES = 20 * 1024 * 1024; // 20MB
const DateLoadValue = new Date().toISOString().split("T")[0];
import vehicles from "../data/vehicles.json";
---

<div
  class="frm_forms with_frm_style frm_style_formidable-style"
  id="frm_form_3_container"
  data-token="6175db04c788b56068a0069e43debc77"
>
  <form
    enctype="multipart/form-data"
    method="post"
    action="/api/forms"
    class="frm-show-form mm-form"
    data-mm-form
    data-form-name="Appointment Form"
    id={FORM_ID}
    data-vehicles={JSON.stringify(vehicles)}
    data-token="6175db04c788b56068a0069e43debc77"
    data-validated="false"
    novalidate
  >
    <div class="frm_form_fields">
      <fieldset>
        <legend class="frm_screen_reader">Appointment Form</legend>

        <div class="frm_fields_container">
          <input type="hidden" name="frm_action" value="create" />
          <input type="hidden" name="form_id" value="3" />
          <input type="hidden" name="frm_hide_fields_3" id="frm_hide_fields_3" value="" />
          <input type="hidden" name="form_key" value="appointmentform" />
          <input type="hidden" name="item_meta[0]" value="" />
          <input type="hidden" id="frm_submit_entry_3" name="frm_submit_entry_3" value="cb96dd78bf" />
          <input type="hidden" name="_wp_http_referer" value="/" />

          <div id="frm_field_20_container" class="frm_form_field frm_section_heading form-field frm4 frm_first">
            <h5 class="frm_pos_top frm_section_spacing">Contact Info</h5>

            <div id="frm_field_10_container" class="frm_form_field form-field frm_required_field frm_none_container frm12 frm_first">
              <label for="field_2g0ta" id="field_2g0ta_label" class="frm_primary_label">
                Your name <span class="frm_required" aria-hidden="true">*</span>
              </label>
              <input
                type="text"
                id="field_2g0ta"
                name="item_meta[10]"
                value=""
                data-sectionid="20"
                placeholder="Your name"
                data-reqmsg="Your name cannot be blank."
                data-invmsg="Text is invalid"
                aria-invalid="false"
              />
            </div>

            <div id="frm_field_18_container" class="frm_form_field form-field frm_none_container frm12 frm_first">
              <label for="field_ruisa" id="field_ruisa_label" class="frm_primary_label">Phone number</label>
              <input
                type="tel"
                id="field_ruisa"
                name="item_meta[18]"
                value=""
                data-sectionid="20"
                data-frmmask="(999)-999-9999"
                placeholder="Your phone number"
                data-invmsg="Phone is invalid"
                aria-invalid="false"
                pattern="\(\d\d\d\)-\d\d\d-\d\d\d\d$"
              />
            </div>

            <div id="frm_field_15_container" class="frm_form_field form-field frm_required_field frm_none_container frm12 frm_first">
              <label for="field_sztql" id="field_sztql_label" class="frm_primary_label">
                Email <span class="frm_required" aria-hidden="true">*</span>
              </label>
              <input
                type="email"
                id="field_sztql"
                name="item_meta[15]"
                value=""
                data-sectionid="20"
                placeholder="Your email"
                data-reqmsg="Email cannot be blank."
                data-invmsg="Email is invalid"
                aria-invalid="false"
              />
            </div>
          </div>

          <div id="frm_field_22_container" class="frm_form_field frm_section_heading form-field frm4">
            <h5 class="frm_pos_top frm_section_spacing">Car Detail</h5>

            <div id="frm_field_9_container" class="frm_form_field form-field form-icon arrow-icon frm_none_container frm12 frm_first">
              <label for="field_ospp1" id="field_ospp1_label" class="frm_primary_label">Select vehicle year</label>
              <select
                name="item_meta[9]"
                id="field_ospp1"
                data-sectionid="22"
                data-placeholder="Select Vehicle Year"
                placeholder="Select Vehicle Year"
                data-invmsg="Select vehicle year is invalid"
                aria-invalid="false"
              >
                <option value="">Select Vehicle Year</option>
                <option value="1990">1990</option>
                <option value="1991">1991</option>
                <option value="1992">1992</option>
                <option value="1993">1993</option>
                <option value="1994">1994</option>
                <option value="1995">1995</option>
                <option value="1996">1996</option>
                <option value="1997">1997</option>
                <option value="1998">1998</option>
                <option value="1999">1999</option>
                <option value="2000">2000</option>
                <option value="2001">2001</option>
                <option value="2002">2002</option>
                <option value="2003">2003</option>
                <option value="2004">2004</option>
                <option value="2005">2005</option>
                <option value="2006">2006</option>
                <option value="2007">2007</option>
                <option value="2008">2008</option>
                <option value="2009">2009</option>
                <option value="2010">2010</option>
                <option value="2011">2011</option>
                <option value="2012">2012</option>
                <option value="2013">2013</option>
                <option value="2014">2014</option>
                <option value="2015">2015</option>
                <option value="2016">2016</option>
                <option value="2017">2017</option>
                <option value="2018">2018</option>
                <option value="2019">2019</option>
                <option value="2020">2020</option>
                <option value="2021">2021</option>
                <option value="2022">2022</option>
                <option value="2023">2023</option>
                <option value="2024">2024</option>
              </select>
            </div>

            <div id="frm_field_13_container" class="frm_form_field form-field form-icon arrow-icon frm_none_container frm12 frm_first">
              <label for="field_jr7jc" id="field_jr7jc_label" class="frm_primary_label">Select vehicle make</label>
              <select
                name="item_meta[13]"
                id="field_jr7jc"
                data-sectionid="22"
                data-placeholder="Select vehicle make"
                placeholder="Select vehicle make"
                data-invmsg="Select vehicle make is invalid"
                aria-invalid="false"
              >
                <option value="">Select vehicle make</option>
              </select>
            </div>

            <div id="frm_field_16_container" class="frm_form_field form-field form-icon arrow-icon frm_none_container frm12 frm_first">
              <label for="field_fwpmx" id="field_fwpmx_label" class="frm_primary_label">Select vehicle model</label>
              <select
                name="item_meta[16]"
                id="field_fwpmx"
                data-sectionid="22"
                data-placeholder="Select vehicle model"
                placeholder="Select vehicle model"
                data-invmsg="Select vehicle model is invalid"
                aria-invalid="false"
              >
                <option value="">Select vehicle model</option>
              </select>
            </div>

            <div id="frm_field_28_container" class="frm_form_field form-field frm_none_container">
              <label for="field_u1ohh" id="field_u1ohh_label" class="frm_primary_label">Vehicle is not listed information</label>
              <textarea
                name="item_meta[28]"
                id="field_u1ohh"
                rows="7"
                data-sectionid="22"
                placeholder="Vehicle Information"
                data-invmsg="Paragraph is invalid"
                aria-invalid="false"></textarea>
            </div>

            <div id="frm_field_27_container" class="frm_form_field form-field frm_none_container vertical_radio">
              <div id="field_tn0xg_label" class="frm_primary_label">Vehicle is not listed in the dropdowns</div>
              <div class="frm_opt_container" aria-labelledby="field_tn0xg_label" role="group">
                <div class="frm_checkbox" id="frm_checkbox_27-22-0">
                  <label for="field_tn0xg-0">
                    <input
                      type="checkbox"
                      name="item_meta[27][]"
                      id="field_tn0xg-0"
                      value="Yes"
                      data-sectionid="22"
                      data-invmsg="Vehicle is not listed in the dropdowns is invalid"
                    />
                    My vehicle is not listed.
                  </label>
                </div>
              </div>
            </div>
          </div>

          <div id="frm_field_24_container" class="frm_form_field frm_section_heading form-field frm4">
            <h5 class="frm_pos_top frm_section_spacing">Appointment Details</h5>

            <div
              id="frm_field_11_container"
              class="frm_form_field form-field form-icon calendar-icon frm_required_field frm_none_container frm12 frm_first"
            >
              <label for="field_fm2dt" id="field_fm2dt_label" class="frm_primary_label">
                Date <span class="frm_required" aria-hidden="true">*</span>
              </label>
              <input
  type="date"
  id="field_fm2dt"
  name="item_meta[11]"
  data-sectionid="24"
  data-reqmsg="Date cannot be blank."
  data-invmsg="Date is invalid"
  class="frm_date"
  aria-invalid="false"
/>
            </div>

            <div id="frm_field_26_container" class="frm_form_field form-field form-icon clock-icon frm_required_field frm_none_container">
              <label for="field_bk1vq" id="field_bk1vq_label" class="frm_primary_label">
                Appointment time <span class="frm_required" aria-hidden="true">*</span>
              </label>
              <select
                name="item_meta[26]"
                id="field_bk1vq"
                data-sectionid="24"
                data-frmval="Select appointment time"
                data-reqmsg="Appointment time cannot be blank."
                data-invmsg="Appointment time is invalid"
                aria-invalid="false"
              >
                <option value="Select appointment time" selected="selected">Select appointment time</option>
                <option value="8:00am">8:00am</option>
                <option value="8:30am">8:30am</option>
                <option value="9:00am">9:00am</option>
                <option value="9:30am">9:30am</option>
                <option value="10:00am">10:00am</option>
                <option value="10:30am">10:30am</option>
                <option value="11:00am">11:00am</option>
                <option value="11:30am">11:30am</option>
                <option value="12:00pm">12:00pm</option>
                <option value="12:30pm">12:30pm</option>
                <option value="1:00pm">1:00pm</option>
                <option value="1:30pm">1:30pm</option>
                <option value="2:00pm">2:00pm</option>
                <option value="2:30pm">2:30pm</option>
                <option value="3:00pm">3:00pm</option>
                <option value="3:30pm">3:30pm</option>
                <option value="4:00pm">4:00pm</option>
                <option value="4:30pm">4:30pm</option>
              </select>
            </div>

            <div id="frm_field_17_container" class="frm_form_field form-field frm_none_container frm_compact">
              <label for="field_djuda" id="field_djuda_label" class="frm_primary_label">File Upload</label>

              <!-- REAL input (hidden) -->
              <input
                type="file"
                id="field_djuda"
                name="item_meta[17][]"
                multiple
                data-mm-files
                data-max-bytes={MAX_UPLOAD_BYTES}
                style="position:absolute; left:-9999px; width:1px; height:1px; opacity:0;"
              />

              <div class="frm_dropzone frm_multi_upload frm_clearfix" id="file17_dropzone" role="group" tabindex="0" >
                <div class="dz-message needsclick" data-mm-file-btn></div>
              </div>
			   <div class="frm_small_text text-center">Maximum upload size: 20MB each</div>
			  <div class="frm_small_text" id="appointment_files" aria-live="polite"></div>
            </div>
          </div>

          <div id="frm_field_96_container" class="frm_form_field form-field frm_required_field frm_hidden_container">
            <label for="field_ir3uv" id="field_ir3uv_label" class="frm_primary_label">
              Services Requested <span class="frm_required" aria-hidden="true">*</span>
            </label>
            <textarea
              name="item_meta[96]"
              id="field_ir3uv"
              rows="5"
              placeholder="Services Requested"
              data-reqmsg="Services Requested cannot be blank."
              data-invmsg="Paragraph is invalid"
              aria-invalid="false"></textarea>
          </div>

          <input type="hidden" name="recaptcha_token" value="" />

          <div id="frm_field_104_container" class="frm_form_field form-field">
            <div class="frm_submit frm_first frm_fourth">
              <button class="frm_button_submit frm_final_submit btn btn-border btn-invert" type="submit"><span>Submit</span></button>
            </div>

            <div class="frm_three_fourths">
              <div class="notes-custom">
                <p>Please note that the date and time you requested may not be available.</p>
              </div>
            </div>
          </div>

          <div class="form-status" aria-live="polite" data-form-status style="display:none;"></div>

          <input type="hidden" name="item_key" value="" />

          <div id="frm_field_108_container">
            <label for="field_294cv">If you are human, leave this field blank.</label>
            <input id="field_294cv" type="text" class="frm_form_field form-field frm_verify" name="item_meta[108]" value="" />
          </div>

          <input name="frm_state" type="hidden" value="+dVHBR3AETpPd78HZJOMFqei9qSgpFCnNYZwzydmVr0=" />
        </div>
      </fieldset>
    </div>
  </form>
</div>

<style>
  /* Suppress Formidable's global :invalid styling until the user actually tries to submit */
  :global(#form_appointmentform[data-validated="false"] .frm_form_field :invalid),
  :global(#form_appointmentform[data-validated="false"] input:invalid),
  :global(#form_appointmentform[data-validated="false"] textarea:invalid),
  :global(#form_appointmentform[data-validated="false"] select:invalid) {
    border-color: inherit !important;
    box-shadow: none !important;
    outline: none !important;
  }

  /* Ensure date input has decent height on mobile Safari */
  :global(#form_appointmentform input[type="date"]) {
    min-height: 24px;
    line-height: 24px;
  }

  #frm_field_17_container .frm_small_text {
	font-size: 10px;
  }

  
#file17_dropzone .dz-message {
    font-size: 14px;
    border: 0px solid #dfdfdf;
    background: #f7f7f7;
    display: inline-block;
    border-radius: 4px;
    padding: 0;
    box-sizing: border-box;
    box-shadow: 0 1px 1px #eeeeee;
    vertical-align: middle;
    margin: 0;
    width: 100%;
    height: 50px;
    line-height: 50px;
}

/* Make the "Choose/Add files" row feel like Formidable */
#file17_dropzone .dz-message .frm_upload_text,
#file17_dropzone .dz-message .frm_compact_text {
  display: inline-block;
  line-height: normal;
}

/* Keep small helper text readable */
#file17_dropzone .dz-message .frm_small_text {
  display: block;
  margin-top: 6px;
  line-height: 1.35;
}

/* OPTIONAL (if you want Formidable-style “file tag” look closer)
   Put in overrides.css (not required; only if you want it tighter) */

#file17_dropzone .dz-message .mm-file-btn {
  padding: 0;
  border: 0;
  background: transparent;
  font: inherit;
  cursor: pointer;
}

/* File list container spacing */
#appointment_files {
  margin-top: 8px;
}

/* Formidable-like rows */
#appointment_files .mm-file-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 8px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(0, 0, 0, 0.10);
  background: rgba(255, 255, 255, 0.70);
}

  /* --- File list rows --- */
  :global(#appointment_files) {
    margin-top: 10px;
  }
  :global(#appointment_files .mm-file-row) {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 8px;
    padding: 0 12px;
    border-radius: 10px;
    border: 1px solid rgba(0, 0, 0, 0.10);
    background: rgba(255, 255, 255, 0.70);
  }
  :global(#appointment_files .mm-file-name) {
    flex: 1;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-weight: 700;
	font-size: 10px;
  }
  :global(#appointment_files .mm-file-size) {
    font-size: 10px;
    opacity: 0.75;
    white-space: nowrap;
  }
  :global(#appointment_files .mm-file-remove) {
    white-space: nowrap;
    font-size: 12px;
	padding: 0 5px !important;
	border: none;
	cursor: pointer
  }

  :global(#file17_dropzone .dz-message .mm-file-btn) {
    padding: 0;
    border: 0;
    background: transparent;
    font: inherit;
    cursor: pointer;
	border: none
  }

  /* If Formidable compact mode hides small text globally, force our list visible */
  :global(.frm_compact #file17_dropzone #appointment_files),
  :global(.frm_compact #file17_dropzone #appointment_files_remove_all) {
    display: block !important;
  }
</style>

<script is:inline>
  (() => {
    // Multi-file upload UX (Formidable-like list) — Safari-safe UI state.
    const form = document.getElementById("form_appointmentform");
    if (!form) return;

    const dropzone = document.getElementById("file17_dropzone");
    const input = document.getElementById("field_djuda");
    const list = document.getElementById("appointment_files");
    const removeAllBtn = document.getElementById("appointment_files_remove_all");
    const statusEl = form.querySelector("[data-form-status]");
    if (!dropzone || !input || !list) return;

    let selectedFiles = [];

    const maxBytes = Number(input.getAttribute("data-max-bytes") || "0") || 20 * 1024 * 1024;

    const showUploadError = (msg) => {
      if (!statusEl) return;
      statusEl.style.display = "block";
      statusEl.className = "form-status form-status--error";
      statusEl.textContent = msg;
    };

    const clearStatus = () => {
      if (!statusEl) return;
      statusEl.style.display = "none";
      statusEl.textContent = "";
    };

    const formatBytes = (n) => {
      const b = Number(n || 0);
      if (b < 1024) return `${b} B`;
      const kb = b / 1024;
      if (kb < 1024) return `${kb.toFixed(1)} KB`;
      const mb = kb / 1024;
      return `${mb.toFixed(1)} MB`;
    };

    const syncToInput = () => {
      try {
        const dt = new DataTransfer();
        selectedFiles.forEach((f) => dt.items.add(f));
        input.files = dt.files;
      } catch (_) {}
    };

    const dedupe = (files) => {
      const map = new Map();
      files.forEach((f) => {
        const k = `${f.name}__${f.size}__${f.lastModified}`;
        if (!map.has(k)) map.set(k, f);
      });
      return Array.from(map.values());
    };

    const filterBySize = (files) => {
      if (!maxBytes) return files;
      let rejected = 0;
      const ok = files.filter((f) => {
        if (f.size > maxBytes) { rejected += 1; return false; }
        return true;
      });

      if (rejected) {
        showUploadError(`One or more files exceed the upload limit. Please keep each file under ${Math.round(maxBytes / (1024 * 1024))}MB.`);
      } else {
        clearStatus();
      }
      return ok;
    };

    const setButtonLabel = () => {
      const btns = dropzone.querySelectorAll("[data-mm-file-btn]");
      const n = selectedFiles.length;
      btns.forEach((b) => { b.textContent = n ? `Add files (${n})` : "Choose File"; });
    };

    const render = () => {
      list.innerHTML = "";
      setButtonLabel();

      if (!selectedFiles.length) {
        if (removeAllBtn) removeAllBtn.style.display = "none";
        return;
      }

      selectedFiles.forEach((f, i) => {
        const row = document.createElement("div");
        row.className = "mm-file-row";

        const name = document.createElement("span");
        name.className = "mm-file-name";
        name.textContent = f.name;

        const size = document.createElement("span");
        size.className = "mm-file-size";
        size.textContent = formatBytes(f.size);

        const btn = document.createElement("a");
        btn.type = "button";
        btn.className = "mm-file-remove";
        btn.textContent = "X";
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          e.stopPropagation();
          selectedFiles.splice(i, 1);
          syncToInput();
          render();
        });

        row.appendChild(name);
        row.appendChild(size);
        row.appendChild(btn);
        list.appendChild(row);
      });

      if (removeAllBtn) removeAllBtn.style.display = "inline-block";
    };

    const addFiles = (incoming) => {
      const add = Array.from(incoming || []);
      if (!add.length) return;
      selectedFiles = filterBySize(dedupe(selectedFiles.concat(add)));
      syncToInput();
      render();
    };

    const clearFiles = () => {
      selectedFiles = [];
      try { input.value = ""; } catch (_) {}
      syncToInput();
      render();
      clearStatus();
    };

    const openPicker = (e) => {
      if (e) { e.preventDefault(); e.stopPropagation(); }
      input.click();
    };

    dropzone.querySelectorAll("[data-mm-file-btn]").forEach((b) => b.addEventListener("click", openPicker));

    dropzone.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") {
        const t = e.target;
        if (t && t.closest && t.closest("button")) return;
        openPicker(e);
      }
    });

    input.addEventListener("change", () => {
      addFiles(input.files);
      try { input.value = ""; } catch (_) {}
    });

    dropzone.addEventListener("dragover", (e) => e.preventDefault());
    dropzone.addEventListener("drop", (e) => {
      e.preventDefault();
      if (e.dataTransfer && e.dataTransfer.files) addFiles(e.dataTransfer.files);
    });

    if (removeAllBtn) {
      removeAllBtn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        clearFiles();
      });
    }

    render();
  })();
</script>

<script is:inline>
  (() => {
    // Vehicle cascade + "vehicle not listed" toggle.
    const FORM_ID = "form_appointmentform";
    const MODAL_ID = "appointmentForm";
    const INIT_FLAG = "mmInitVehicles";

    const init = (root) => {
      const form = root?.getElementById ? root.getElementById(FORM_ID) : document.getElementById(FORM_ID);
      if (!form) return;
      if (form.dataset[INIT_FLAG] === "1") return;
      form.dataset[INIT_FLAG] = "1";

      const VEHICLES = (() => {
        try { return JSON.parse(form.getAttribute("data-vehicles") || "{}"); }
        catch (_) { return {}; }
      })();

      const yearEl = form.querySelector("#field_ospp1");
      const makeEl = form.querySelector("#field_jr7jc");
      const modelEl = form.querySelector("#field_fwpmx");

      const notListedEl = form.querySelector("#field_tn0xg-0");
      const manualWrap = form.querySelector("#frm_field_28_container");
      const manualEl = form.querySelector("#field_u1ohh");

      const yearWrap = form.querySelector("#frm_field_9_container");
      const makeWrap = form.querySelector("#frm_field_13_container");
      const modelWrap = form.querySelector("#frm_field_16_container");

      if (!yearEl || !makeEl || !modelEl || !notListedEl || !manualWrap || !yearWrap || !makeWrap || !modelWrap) return;

      const resetSelect = (el, placeholder) => {
        el.innerHTML = "";
        const opt = document.createElement("option");
        opt.value = "";
        opt.textContent = placeholder;
        el.appendChild(opt);
        el.value = "";
      };

      const years = Object.keys(VEHICLES).sort((a, b) => Number(b) - Number(a));
      resetSelect(yearEl, "Select Vehicle Year");
      years.forEach((y) => {
        const opt = document.createElement("option");
        opt.value = y;
        opt.textContent = y;
        yearEl.appendChild(opt);
      });

      resetSelect(makeEl, "Select Vehicle Make");
      resetSelect(modelEl, "Select Vehicle Model");

      const populateMakes = (year) => {
        resetSelect(makeEl, "Select Vehicle Make");
        resetSelect(modelEl, "Select Vehicle Model");
        if (!year || !VEHICLES[year]) return;
        Object.keys(VEHICLES[year]).sort().forEach((make) => {
          const opt = document.createElement("option");
          opt.value = make;
          opt.textContent = make;
          makeEl.appendChild(opt);
        });
      };

      const populateModels = (year, make) => {
        resetSelect(modelEl, "Select Vehicle Model");
        const models = VEHICLES?.[year]?.[make];
        if (!models || !Array.isArray(models)) return;
        models.slice().sort().forEach((model) => {
          const opt = document.createElement("option");
          opt.value = model;
          opt.textContent = model;
          modelEl.appendChild(opt);
        });
      };

      const setVehicleMode = () => {
        const manual = !!notListedEl.checked;
        yearWrap.hidden = manual;
        makeWrap.hidden = manual;
        modelWrap.hidden = manual;
        manualWrap.hidden = !manual;

        if (manual) {
          yearEl.value = "";
          makeEl.value = "";
          modelEl.value = "";
        } else if (manualEl) {
          manualEl.value = "";
        }
      };

      yearEl.addEventListener("change", (e) => {
        e.stopImmediatePropagation();
        e.stopPropagation();
        populateMakes(yearEl.value);
      }, true);

      makeEl.addEventListener("change", (e) => {
        e.stopImmediatePropagation();
        e.stopPropagation();
        populateModels(yearEl.value, makeEl.value);
      }, true);

      notListedEl.addEventListener("change", setVehicleMode);

      setVehicleMode();
      populateMakes(yearEl.value);
      populateModels(yearEl.value, makeEl.value);
    };

    init(document);

    document.addEventListener("shown.bs.modal", (e) => {
      const modal = e?.target;
      if (modal && modal.id === MODAL_ID) init(document);
    });

    const modalEl = document.getElementById(MODAL_ID);
    if (modalEl && "MutationObserver" in window) {
      const obs = new MutationObserver(() => init(document));
      obs.observe(modalEl, { subtree: true, childList: true });
    }
  })();
</script>